{% load general_tags %} {% load dashboard_tags %} {% load subscriptions_tags %} {% load static %} {% load humanize %} {% load i18n %}

{% language language %}

{% with plan_info=plan_name|get_plan_info %}
    <section class="single__plan-box p-3 {% if current_subscription == plan_name or current_subscription == plan_name|add:'_plus' and page != 'registration' %}single__plan-box--selected position-relative{% endif %} {% if active_plan == plan_name and page == 'registration' %}plans__active position-relative{% endif %} {% if page == 'registration' %} c-pointer plans {% endif %} {{classes}}" data-selected="{% if current_subscription == plan_name %}true{% else %}false{% endif %}" data-value="{{plan_name}}" data-howmany_automations="{{number_of_services}}">
        <div class='discover__selected-plan--check-container align-items-center gap-10 p-1 f-size-14'>
            <img src="{% static '/img/thumbs_up.svg' %}" alt="Check Icon" class="discover__selected-plan--check">
            <span>{{'recommended_capitalized'|translate:language }}</span>
        </div>  
        <div class="single__plan-box-header">
            {% if current_subscription == plan_name %}
                <div class='toaster__dark-gray--container'>
                    <span class="toaster__dark-gray f-size-12">{{'current_plan'|translate:language }}</span>
                </div>    
            {% endif %}
            <p class="m-0 f-size-26"><strong>{{plan_name|upper}}</strong></p>
            {% if plan_name == 'starter'%}
                <p class="f-size-14">{{'starter_plan_subtitle'|translate:language }}</p>
            {% elif plan_name == 'advanced'%}
                <p class="f-size-14">{{'advanced_plan_subtitle'|translate:language}}</p>
            {% else %}
                <p class="f-size-14">
                    {% if has_plan_negotiation != False %}
                        {{ 'your'|translate:language }}
                    {% else %}
                        {{'business_plan_subtitle_1'|translate:language}} 
                    {% endif %}
                <strong>{{'bespoke_plan'|translate:language}}</strong> 
                {{'business_plan_subtitle_2'|translate:language}} 
                </p>
            {% endif %}
        </div>
        <div class='d-flex flex-column align-items-baseline'>
        {% if plan_name != 'business' %}
            <p class="mb-2 mr-auto single__plan-box--price" data-price="{{plan_info.value|multiply:10}}">R$ <strong class="f-size-26">{{ plan_info.value }}</strong><span class='secondary__color'>/ {{'month'|translate:language }}</span></p>
            {% if active_plan != plan_name %}
                <a href="{% url 'end_of_trial_choose_plan' plan_name 'monthly' %}" target="_blank" class="button__link button__link--box py-2 align-self-center">{{'choose_this_plan'|translate:language }}</a>
            {% else %}
                <a href="{% url 'end_of_trial_choose_plan' plan_name 'monthly' %}" target="_blank" class="btn__purple no-uppercase align-self-center py-2 px-4">{{'continue_with_this_plan'|translate:language}}</a>
            {% endif %}
        {% else %}
            {% if has_plan_negotiation == False %}
                <img src="{% static 'img/puzzle.svg'%}" alt="Puzzle icon" class='mr-auto h-2rem mb-3'>
                {% if active_plan != plan_name %}
                    <a href="{% url 'end_of_trial_choose_plan' plan_name %}" target="_blank" class="button__link button__link--box py-2 align-self-center">{{'receive_evaluation'|translate:language }}</a>
                {% else %}
                    <a href="{% url 'end_of_trial_choose_plan' plan_name %}" target="_blank" class="btn__purple no-uppercase align-self-center py-2 px-4">{{'receive_evaluation'|translate:language }}</a>
                {% endif %}
            {% else %}
                <p class="mb-2 mr-auto single__plan-box--price" data-price="{{ subscription.get_value|multiply:10 }}">R$ <strong class="f-size-26">{{ subscription.get_value }}</strong><span class='secondary__color'>/ {{'month'|translate:language }}</span></p>
                {% if active_plan != plan_name %}
                    <a href="{% url 'end_of_trial_choose_plan' plan_name 'monthly' %}" target="_blank" class="button__link button__link--box py-2 align-self-center">{{'receive_evaluation'|translate:language }}</a>
                {% else %}
                    <a href="{% url 'end_of_trial_choose_plan' plan_name 'monthly' %}" target="_blank" class="btn__purple no-uppercase align-self-center py-2 px-4">{{'receive_evaluation'|translate:language }}</a>
                {% endif %}
            {% endif %}
        {% endif %}
    </div>    
        <div class='mt-3 d-flex flex-column gap-10'>
            {% if plan_name == 'starter' %}
                <p class="m-0 f-size-14"><img src="{% static '/img/check.svg' %}" alt="Check Icon"><strong> {{ plan_info.qnt_automations }} {{'license'|translate:language }}</strong> {{'available_to_choose_any_service'|translate:language }}</p>
                <p class="m-0 f-size-14"><img src="{% static '/img/check.svg' %}" alt="Check Icon"><strong> {{'up_to'|translate:language }} {{ plan_info.qnt_queries|intcomma }} {{'monthly_consultations'|translate:language }}</strong></p>
                <p class="m-0 f-size-14"><img src="{% static '/img/check.svg' %}" alt="Check Icon"> {{ 'maintenance_and_updates_on_our_own'|translate:language }}</p>
            {% elif plan_name == 'advanced' %}
                <p class="m-0 f-size-14"><img src="{% static '/img/check.svg' %}" alt="Check Icon"> <strong>{{ plan_info.qnt_automations }} {{'licenses'|translate:language }}</strong> {{'available_to_hire_different_services'|translate:language }}</p>
                <p class="m-0 f-size-14"><img src="{% static '/img/check.svg' %}" alt="Check Icon"> <strong> {{'up_to'|translate:language }} {{ plan_info.qnt_queries|intcomma }} {{'monthly_consultations'|translate:language }} </strong></p>
                <p class="m-0 f-size-14"><img src="{% static '/img/check.svg' %}" alt="Check Icon"> {{ 'invite_your_team'|translate:language }}</p>
                <p class="m-0 f-size-14"><img src="{% static '/img/check.svg' %}" alt="Check Icon"> {{ 'maintenance_and_updates_on_our_own'|translate:language }}</p>
            {% else %}
                {% if has_plan_negotiation != False %}
                    <p class="m-0 f-size-14"><img src="{% static '/img/check.svg' %}" alt="Check Icon"> <strong>{{ subscription.get_number_of_hired_services }} {{'licenses'|translate:language }}</strong> {{'to_use_in_the_services_you_want'|translate:language }}</p>
                    {% if subscription.get_queries_limit == 0 %}
                        <p class="m-0 f-size-14"><img src="{% static '/img/check.svg' %}" alt="Check Icon"> <strong class="text-capitalize">{{'unlimited_queries'|translate:language }} </strong> </p>
                    {% else %}
                        <p class="m-0 f-size-14"><img src="{% static '/img/check.svg' %}" alt="Check Icon"> <strong> {{ subscription.get_queries_limit|intcomma }} </strong> {{'monthly_for_licenses'|translate:language }}</p>
                    {% endif %}
                {% else %}
                    <p class="m-0 f-size-14"><img src="{% static '/img/check.svg' %}" alt="Check Icon"> <strong>4+ {{'licenses'|translate:language }}</strong>, {{'according_to_your_need'|translate:language }}</p>
                    <p class="m-0 f-size-14"><img src="{% static '/img/check.svg' %}" alt="Check Icon"> {{'more_limit_options_of_consultations'|translate:language }}</p>
                {% endif %}
                <p class="m-0 f-size-14"><img src="{% static '/img/check.svg' %}" alt="Check Icon"> {{ 'invite_your_team'|translate:language }}</p>
                <p class="m-0 f-size-14"><img src="{% static '/img/check.svg' %}" alt="Check Icon"> {{ 'maintenance_and_updates_on_our_own'|translate:language }}</p>
            {% endif %}
        </div>
    </section>
{% endwith %}
{% endlanguage %}